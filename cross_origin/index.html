<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Belte og Seler CORS demo</title>
  </head>
<body>
<p>
    The button below will send a ES fetch request to the API at http://localhost:8081/api/products.
</p>
<button>Klick me to test the Cross Origin Resource Sharing (CORS) setup ...</button>
<p>
<div id="output"></div>
</p>
<script>
  const get_products_endpoint = 'http://localhost:8081/api/products/'
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelector('button').addEventListener('click', () => {
      const display = document.querySelector('#output')
      fetch(get_products_endpoint)
        .then(response => response.json())
        .then(data => { display.textContent = `Successfully received ${data.length} products` })
        .catch(error => { display.textContent = 'Either the CORS rules are not working or API server unreachable.' })
    })
  })
</script>
</body>
</html>
